<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Hadoop-xz by yongtang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Hadoop-xz</h1>
      <h2 class="project-tagline">XZ Codec for Apache Hadoop</h2>
      <a href="https://github.com/yongtang/hadoop-xz" class="btn">View on GitHub</a>
      <a href="https://github.com/yongtang/hadoop-xz/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/yongtang/hadoop-xz/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="hadoop-xz-" class="anchor" href="#hadoop-xz-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hadoop-XZ <a href="https://travis-ci.org/yongtang/hadoop-xz"><img src="https://travis-ci.org/yongtang/hadoop-xz.svg?branch=master" alt="Build Status"></a>
</h1>

<h2>
<a id="xz-lzmalzma2-codec-for-apache-hadoop" class="anchor" href="#xz-lzmalzma2-codec-for-apache-hadoop" aria-hidden="true"><span class="octicon octicon-link"></span></a>XZ (LZMA/LZMA2) Codec for Apache Hadoop</h2>

<p>Hadoop-XZ is a project to add the XZ compression codec in Hadoop.  XZ is a lossless data compression file format that incorporates the LZMA/LZMA2 compression algorithms.  XZ offers excellent compression ratio (LZMA/LZMA2) at the expense of longer compression time compared with other compression codecs such as gzip, lzo, or bzip2.  The decompression time of XZ is much more comparable with other compression codecs.  In fact, XZ have a much better decompression time than bzip2. It is an ideal compression format when longer compression time is tolerable.  The data can be divided into independently compressed blocks with the index of the blocks contained in the XZ file, which makes XZ a native splittable file format.</p>

<p>This library is built on top of the XZ Java library provided by <a href="http://tukaani.org">http://tukaani.org</a> (XZ Utils).  It supports the SplittableCompressionCodec interface so the individual XZ files could be processed with distributed tasks.  Keep in mind that XZ program tends to choose larger block size if no block size is specified (--block-size=size).  That often results in a single block within a huge compressed file.  This will not help distributed tasks.  It is always advised that an appropriate block size is specified when compression is performed.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Add the hadoop-xz POM to a project with</p>

<div class="highlight highlight-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;io.sensesecure&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;hadoop-xz&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;1.4&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<p>Or add project's SBT with </p>

<div class="highlight highlight-scala"><pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.sensesecure<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>hadoop-xz<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.4<span class="pl-pds">"</span></span></pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>It is fairly simple to use XZ codec in Hadoop related programs.  For example, the following is an Apache Spark example of line count for an XZ compressed text file:</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">sparkConf</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SparkConf</span>().setAppName(<span class="pl-s"><span class="pl-pds">"</span>Simple Application<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">sparkContext</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SparkContext</span>(sparkConf)
<span class="pl-k">val</span> <span class="pl-en">configuration</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Configuration</span>()
configuration.set(<span class="pl-s"><span class="pl-pds">"</span>io.compression.codecs<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>io.sensesecure.hadoop.xz.XZCodec<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">rdd</span> <span class="pl-k">=</span> sparkContext.newAPIHadoopFile(<span class="pl-s"><span class="pl-pds">"</span>sample.text.xz<span class="pl-pds">"</span></span>,
            <span class="pl-c1">classOf</span>[<span class="pl-en">TextInputFormat</span>], <span class="pl-c1">classOf</span>[<span class="pl-en">LongWritable</span>], <span class="pl-c1">classOf</span>[<span class="pl-en">Text</span>],
            configuration)

println(rdd.count())</pre></div>

<h2>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h2>

<p>If you have trouble with the library or have questions, check out the GitHub repository at <a href="http://github.com/yongtang/hadoop-xz">http://github.com/yongtang/hadoop-xz</a> .</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/yongtang/hadoop-xz">Hadoop-xz</a> is maintained by <a href="https://github.com/yongtang">yongtang</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

